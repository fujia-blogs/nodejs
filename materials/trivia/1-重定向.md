# 重定向

项目中，会碰到这样的需求，前端发起 http 请求到服务端进行一些校验或者登陆操作，然后根据服务端查询结果，拼接 url 参数打开一个新页面。总的来说，有三种实现方式。

## Ajax 请求

1. 通过 post 方式，发起 http 请求，服务端响应页面地址，由客户端拼接参数，通过 window.location 方式打开新页面。也可以由服务端直接把参数拼接好，返回一个完整的 url 地址由客户端通过 JS 跳转。

## 服务端 302 跳转

### redirect - 重定向

1. 重定向是客户端行为，过程是：

- 客户端发送 http 请求
- web 服务器接受后发送 302 状态码响应及对应新的 location 给客户浏览器
- 客户浏览器发现是 302 响应，则自动再发送一个新的 http 请求，请求 url 是新的 location 地址
- 服务器根据此请求寻找资源并发送给客户，这里为浏览器行为

2. 实现

服务端 302 返给客户端时，会携带一个新的 location 给客户端，客户端需要监听 302 状态，通过 location 打开新页面

```js
if (data.status === 302) {
  location.href = data.location;
}
```

### forward - 转发

1. 流程：

- 客户浏览器发送 http 请求
- web 服务器接受此请求
- 调用内部的一个方法在容器内部完成请求处理和转发动作
- 将目标资源发送给客户；转发的路径必须是同一个 web 容器下的 url，其不能转向到其他的 web 路径上去，中间传递的是自己的容器内的 request。在客户浏览器路径栏显示的仍然是其第一次访问的路径，也就是说客户是感觉不到服务器做了转发的。转发行为是浏览器只做了一次访问请求。
