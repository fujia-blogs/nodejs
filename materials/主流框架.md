# node.js 主流框架

## 问答

Q: express vs koa

- Express 封装、内置了很多中间件，⽐如 connect 和 router ，⽽ KOA 则⽐较轻量，开发者可以根据⾃身需求定制框架；
- Express 是基于 callback 来处理中间件的，⽽ KOA 则是基于 await/async
- 在异步执⾏中间件时，Express 并⾮严格按照洋葱模型执⾏中间件，⽽ KOA 则是严格遵循的

两者基于的 Node.js 版本不同，所以只是出现的时间点不同⽽已，并没有孰优孰劣之分。

Express 功能较全，发展时间⽐较⻓，也经受了不同程度的历练，因此在⼀些项⽬上是⼀个不错的选择。

当然你也可以选择 KOA，虽然刚诞⽣不久，但它是未来的⼀个趋势.

## express

1，涉及 app 函数，中间件，router 和视图四个核心部分

## koa

1，如果需要确保中间件的执行顺序，必须使用 await next()

## egg.js

1，egg.js 在 koa 的基础上，做了各种较成熟的中间件和模块，可以说是在 koa 框架基础上的最佳实践，用以满足开发者开箱即用的特性

## nest.js

## 知识点

1，koa 是未来的一个趋势，egg.js 是目前 koa 的最佳实践

### 洋葱模型

1，无论那个 node.js 框架，都是基于中间件实现的

2，中间件的执行方式需要依据洋葱模型

3，express 和 koa 间的区别也在于洋葱模型的执行方式上

4，特点：

- 进⼊时穿⼊了多少层表⽪，出去时就必须穿出多少层表⽪
- 先穿⼊表⽪，后穿出表⽪，**符合我们说的栈结构，先进后出的原则**

5，思考中间件

- 从外向内的过程是⼀个关键词 next()；
- ⽽从内向外则是每个中间件执⾏完毕后，进⼊下⼀层中间件，⼀直到最后⼀层
